#!/bin/bash

# iOS 26 Azan App - Complete Setup Script
echo "üïå iOS 26 Azan App - Complete Setup"
echo "=================================="
echo ""

# Check if Xcode is running
if pgrep -x "Xcode" > /dev/null; then
    echo "‚úÖ Xcode is running - Perfect!"
else
    echo "‚ö†Ô∏è  Xcode is not running. Please open MyAzan.xcworkspace first."
    echo "   Run: open MyAzan.xcworkspace"
    exit 1
fi

echo ""
echo "üìã NEXT STEPS TO COMPLETE YOUR APP:"
echo ""

echo "1Ô∏è‚É£  ADD ADHAN SWIFT PACKAGE DEPENDENCY"
echo "   In Xcode:"
echo "   ‚Ä¢ File ‚Üí Add Package Dependencies"
echo "   ‚Ä¢ URL: https://github.com/batoulapps/adhan-swift"
echo "   ‚Ä¢ Version: 2.0.0 or later"
echo "   ‚Ä¢ Click Add Package"
echo "   ‚Ä¢ Select 'Adhan' and click Add Package"
echo ""

echo "2Ô∏è‚É£  CONFIGURE APP CAPABILITIES"
echo "   Select 'MyAzan' target ‚Üí Signing & Capabilities tab:"
echo "   ‚Ä¢ Click '+ Capability' and add:"
echo "     - Location (Always and When In Use)"
echo "     - Background Modes (Background fetch, Remote notifications, Audio)"
echo "     - Push Notifications"
echo "     - App Groups (create: group.com.myazan.app)"
echo ""

echo "3Ô∏è‚É£  CONFIGURE WIDGET CAPABILITIES"
echo "   Select 'MyAzanWidget' target ‚Üí Signing & Capabilities:"
echo "   ‚Ä¢ Add App Groups capability"
echo "   ‚Ä¢ Use same group: group.com.myazan.app"
echo ""

echo "4Ô∏è‚É£  CONFIGURE LIVE ACTIVITY CAPABILITIES"
echo "   Select 'MyAzanLiveActivity' target ‚Üí Signing & Capabilities:"
echo "   ‚Ä¢ Add App Groups capability"
echo "   ‚Ä¢ Use same group: group.com.myazan.app"
echo ""

echo "5Ô∏è‚É£  ADD AUDIO FILES"
echo "   Replace placeholder files in MyAzan/Assets/:"
echo "   ‚Ä¢ azan_makkah.mp3 (Makkah Azan recording)"
echo "   ‚Ä¢ azan_madinah.mp3 (Madinah Azan recording)"
echo "   ‚Ä¢ azan_cairo.mp3 (Cairo Azan recording)"
echo "   ‚Ä¢ azan_notification.wav (Notification sound)"
echo ""

echo "6Ô∏è‚É£  BUILD AND TEST"
echo "   ‚Ä¢ Select iOS 18+ device or simulator"
echo "   ‚Ä¢ Press Cmd+R to build and run"
echo "   ‚Ä¢ Grant permissions when prompted"
echo "   ‚Ä¢ Test on physical device for full functionality"
echo ""

echo "üéØ FEATURES READY TO TEST:"
echo "‚úÖ Automatic location detection"
echo "‚úÖ Prayer time calculation"
echo "‚úÖ Azan audio playback"
echo "‚úÖ Smart notifications"
echo "‚úÖ Liquid Glass UI design"
echo "‚úÖ Home screen widgets"
echo "‚úÖ Live Activities with Dynamic Island"
echo "‚úÖ Background updates"
echo "‚úÖ Complete settings"
echo ""

echo "üêõ TROUBLESHOOTING:"
echo "‚Ä¢ Prayer times not updating? Check location permissions"
echo "‚Ä¢ Notifications not working? Check notification permissions"
echo "‚Ä¢ Widget not updating? Check App Groups configuration"
echo "‚Ä¢ Live Activity not starting? Check Live Activity permissions"
echo ""

echo "üì± TESTING CHECKLIST:"
echo "‚ñ° Test on physical iOS 18+ device"
echo "‚ñ° Verify location detection works"
echo "‚ñ° Check prayer time calculations"
echo "‚ñ° Test notification delivery"
echo "‚ñ° Verify widget updates"
echo "‚ñ° Test Live Activity countdown"
echo "‚ñ° Check background refresh"
echo "‚ñ° Test in light and dark modes"
echo "‚ñ° Verify audio playback"
echo "‚ñ° Check settings persistence"
echo ""

echo "üéâ Your iOS 26 Azan app is ready to build!"
echo "   Repository: https://github.com/YasirBucha/ios-26-azan-app"
echo ""
echo "üìö Documentation:"
echo "   ‚Ä¢ README.md - Complete project documentation"
echo "   ‚Ä¢ SETUP_GUIDE.md - Detailed setup instructions"
echo "   ‚Ä¢ setup.sh - Automated setup verification"
echo ""
echo "üïå May your app bring peace and convenience to users worldwide!"
